"use strict";var __extends=this&&this.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(e,t){function r(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}}(),__importDefault=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(exports,"__esModule",{value:!0});var request_1=__importDefault(require("request")),XHRRequestError=function(o){function e(e,t){var r=o.call(this,e)||this;return r.message=e,r.code=t,r}return __extends(e,o),e}(Error);exports.XHRRequestError=XHRRequestError;var XHRRequestApiService=function(){function u(){}return u.requestToPromise=function(e){return new Promise(function(o,n){e.withCredentials=!0,request_1.default(e,function(e,t){if(e||!t)return n(e);if(!t||2!==Math.floor(t.statusCode/100)){var r=t.statusCode.toString()+": "+JSON.stringify(t.body);n(new XHRRequestError(r,t.statusCode))}else o(t.body)})})},u.cleanURL=function(e,t,r){return[e,"/",t,"?",r].join("").replace(/\/+/g,"/").replace(/:\//g,"://").replace(/\?+/g,"?")},u.prototype.options=function(e,t,r,o,n){},u.prototype.get=function(e,t,r,o){return u.requestToPromise({method:"GET",url:u.cleanURL(e,t,r),json:!0})},u.prototype.post=function(e,t,r,o,n){return u.requestToPromise({method:"POST",url:u.cleanURL(e,t,o),body:r,json:!0})},u.prototype.put=function(e,t,r,o,n){return u.requestToPromise({method:"PUT",url:u.cleanURL(e,t,o),body:r,json:!0})},u.prototype.submit=function(e,t,r,o,n){},u.prototype.patch=function(e,t,r,o,n){return u.requestToPromise({method:"PATCH",url:u.cleanURL(e,t,o),body:r,json:!0})},u.prototype.delete=function(e,t,r,o,n){return u.requestToPromise({method:"DELETE",url:u.cleanURL(e,t,o),json:!0})},u}();exports.XHRRequestApiService=XHRRequestApiService;