"use strict";var __extends=this&&this.__extends||function(){var i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(e,t){function r(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}}();Object.defineProperty(exports,"__esModule",{value:!0});var hashable_model_1=require("./hashable.model"),util_1=require("../../util"),MerkleTree=function(a){function s(e,t,r){var i=a.call(this)||this;i.leaves=e,i.index=r;var h=e.length;if(0===h)i._hash=util_1.EMPTY_HASH;else if(1===h)i._hash=e[0].hash,t[e[i._height=0].id]=i;else{var n=Math.floor(h/2),o=e.slice(0,n),l=e.slice(n,h);i.leftChild=new s(o,t,2*r),i.rightChild=new s(l,t,2*r+1),((i.leftChild.parent=i).rightChild.parent=i)._height=i.leftChild._height+1,i._hash=util_1.Web3Utils.soliditySha3({type:"uint32",value:i.leftChild._height},{type:"bytes32",value:i.leftChild._hash},{type:"bytes32",value:i.rightChild._hash})}return i}return __extends(s,a),s.proofChain=function(e){return e.map(function(e){return e.hash})},Object.defineProperty(s.prototype,"hash",{get:function(){return this._hash},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"isEmpty",{get:function(){return 0==this.leaves.length},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"proof",{get:function(){return this.getProof([])},enumerable:!0,configurable:!0}),s.prototype.getProof=function(e){var t=this.parent;return void 0===t?e:(e.push(t.leftChild===this?t.rightChild._hash:t.leftChild._hash),t.getProof(e))},s}(hashable_model_1.Hashable);exports.MerkleTree=MerkleTree;